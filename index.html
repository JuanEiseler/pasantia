<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Alumnos</title>
</head>
<body>

<h1>Alumnos</h1>
<table id="tabla-alumnos" border="1" style="width: 80%; margin: 20px auto;">
  <thead>
    <tr>
      <th>ID</th>
      <th>Nombre</th>
      <th>Apellido</th>
      <th>Teléfono</th>
      <th>Dirección</th>
      <th>Email</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<div id="error" style="color:red; text-align:center;"></div>

<script type="module">
  import { createClient } from 'https://esm.sh/@supabase/supabase-js'

  const supabaseUrl = 'https://qbfuespsiovkwhnvxvvj.supabase.co'
  const supabaseKey = 'sb_publishable_GBetoo-b8I89bdyS5k_dYw_4MjAIpLI'
  const supabase = createClient(supabaseUrl, supabaseKey)

  async function cargarAlumnos() {
    const { data, error } = await supabase
      .from('informacion_de_alumnos')
      .select('*')

    if (error) {
      document.getElementById('error').textContent = 'Error: ' + error.message
      console.error(error)
      return
    }

    const tbody = document.querySelector('#tabla-alumnos tbody')
    tbody.innerHTML = ''

    data.forEach(alumno => {
      const fila = document.createElement('tr')
      fila.innerHTML = `
        <td>${alumno.id_alumno ?? ''}</td>
        <td>${alumno.nombre ?? ''}</td>
        <td>${alumno.apellido ?? ''}</td>
        <td>${alumno.telefono ?? ''}</td>
        <td>${alumno.direccion ?? ''}</td>
        <td>${alumno.email ?? ''}</td>
      `
      tbody.appendChild(fila)
    })
  }

  cargarAlumnos()
</script>

</body>
</html>
